---
title: Dosing Data # Or whatever your site title is
layout: base.njk # Tells Eleventy to use _includes/base.njk
permalink: / # Makes this file generate example.com/index.html
---

{# This extends the base layout. The content below goes into the 'content' block defined in base.njk #}
{% extends "base.njk" %}

{# Import your post card macro, path relative to _includes #}
{% import "macros/post-card.njk" as cards %}

{# Define the content that goes into the 'content' block of base.njk #}
{% block content %}

  {# Optional: Display the page title from front matter #}
  {# You might omit this H1 if the hero section serves as the main visual intro #}
  {# <h1>{{ title }}</h1> #}

  {# --- Hero Section Logic --- #}
  {% set featured = collections.featuredPosts %}

  {# Find the central post #}
  {% set centerPost = null %}
  {% for post in featured %}
    {% if post.data.featured_center %}
      {% set centerPost = post %}
    {% endif %}
  {% endfor %}

  {# Get the side posts (excluding the center one) - take the first 4 available #}
  {% set sidePosts = [] %}
  {% for post in featured %}
    {% if centerPost and post.url != centerPost.url and sidePosts.length < 4 %}
       {% set sidePosts = (sidePosts.push(post), sidePosts) %}
    {% elif not centerPost and sidePosts.length < 4 %} {# Handle case where no center post is explicitly set #}
       {% set sidePosts = (sidePosts.push(post), sidePosts) %}
    {% endif %}
  {% endfor %}

  {# Split side posts into left and right pairs #}
  {% set leftPosts = sidePosts | slice(0, 2) %}
  {% set rightPosts = sidePosts | slice(2, 4) %}

  {# Check if we have enough posts to render the hero section #}
  {# Render if we have a center post OR at least 2 side posts #}
  {% if centerPost or sidePosts.length >= 2 %}
    <section class="hero-section">
      <div class="hero-side hero-left">
        {% for post in leftPosts %}
          {{ cards.postCard(post, 'small') }} {# Pass 'small' size to macro #}
        {% endfor %}
      </div>
      <div class="hero-center-wrapper"> {# Wrapper for potential line styling #}
        {% if centerPost %}
          {{ cards.postCard(centerPost, 'large') }} {# Pass 'large' size to macro #}
        {% else %}
          {# Optional: What to display if no center post is explicitly marked? #}
          {# Example: Display first featured post if no specific center one #}
          {# {% if featured.length > 0 %} #}
          {#   {{ cards.postCard(featured[0], 'large') }} #}
          {# {% endif %} #}
        {% endif %}
      </div>
      <div class="hero-side hero-right">
        {% for post in rightPosts %}
          {{ cards.postCard(post, 'small') }} {# Pass 'small' size to macro #}
        {% endfor %}
      </div>
    </section>
    <hr class="hero-separator"> {# Horizontal separator line #}
  {% endif %}
  {# --- End Hero Section --- #}


  {# --- Rest of the content --- #}
  <h2>More Posts</h2>
  {# Example: Use the .post-grid class from your CSS for the rest #}
  <div class="post-grid">
    {# Build list of hero URLs first #}
    {% set heroUrlsList = [] %}
    {% if centerPost %}
      {% set heroUrlsList = (heroUrlsList.push(centerPost.url), heroUrlsList) %}
    {% endif %}
    {% for post in sidePosts %}
      {% set heroUrlsList = (heroUrlsList.push(post.url), heroUrlsList) %}
    {% endfor %}

    {# Now loop through all posts #}
    {% for post in collections.posts %}
       {# Check if the post URL is NOT in the list #}
       {% if post.url not in heroUrlsList %}
         {# OR use your existing post-preview structure if different #}
         <article class="post-preview">
           <a href="{{ post.url }}" class="post-preview__link">
             {% if post.data.featuredImage %}
             <div class="post-preview__image-container">
               <img src="{{ post.data.featuredImage }}" alt="" class="post-preview__image">
             </div>
             {% endif %}
             <div class="post-preview__content">
               <h3 class="post-preview__title">{{ post.data.title }}</h3>
               {% if post.data.excerpt %}
               <p class="post-preview__excerpt">{{ post.data.excerpt }}</p>
               {% endif %}
               <time datetime="{{ post.date | htmlDateString }}" class="post-preview__date">{{ post.date | readableDate }}</time>
             </div>
           </a>
         </article>
       {% endif %} {# Closes 'if post.url not in heroUrlsList' #}
    {% endfor %} {# Closes 'for post in collections.posts' #}
  </div>

{% endblock %}